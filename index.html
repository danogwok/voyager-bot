<html>
<head>
    <!-- Bootstrap CSS -->
  <link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  <script src="/keypress.js"></script>
  <script src="/socket.io/socket.io.js"></script>


  <style type="text/css">
  #stream {
    height: 99%;
    margin: 0px auto;
    display: block;
    margin-top: 20px;
  }
  </style>

  <script>
    $(document).ready(function() {
      var listener = new window.keypress.Listener();
      var socket = io.connect();

      var my_combos = listener.register_many([
          {
              "keys": "up",
              "on_keydown": function() {
                  console.log("Client: Going forward");
                  socket.emit('goForward');
              },
              "on_keyup": function(e) {
                  console.log("Client: Stop!");
                  socket.emit('stop');
              }
          }, {
              "keys": "down",
              "on_keydown": function() {
                  console.log("Client: Going backward");
                  socket.emit('goBackward');
              },
              "on_keyup": function(e) {
                  console.log("Client: Stop!");
                  socket.emit('stop');
              }

          },{
              "keys": "left",
              "on_keydown": function() {
                  console.log("Client: Turning left");
                  socket.emit('turnLeft');
              },
              "on_keyup": function(e) {
                  console.log("Client: Stop!");
                  socket.emit('stop');
              }

          },{
              "keys": "right",
              "on_keydown": function() {
                  console.log("Client: Turning right");
                  socket.emit('turnRight');
              },
              "on_keyup": function(e) {
                  console.log("Client: Stop!");
                  socket.emit('stop');
              }
          }

    ]);
    });
    var socket = io();
    socket.on('liveStream', function(url) {
        $('#stream').attr('src', url);
        $('.start').hide();
    });

    function startStream() {
        socket.emit('start-stream');
        $('.start').hide();
    }
  </script>
</head>
<body style="text-align:center;">
    <h1 class="text-center">Voyager-bot
       <small>@juliocesar_io</small>
     </h1>
     <hr>

     <button type="button" id="" class="btn btn-info start" onclick="startStream()">Iniciar camara</button>

 <div class="row">
   <img src="" id="stream">
 </div>
</body>
</html>
